<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roblox Username Scanner</title>

<style>
html,body {
  margin:0;
  padding:0;
  background:black;
  color:white;
  font-family:system-ui, Arial;
  overflow:hidden;
}

#matrix {
  position:fixed;
  inset:0;
  z-index:0;
}

.ui {
  position:relative;
  z-index:1;
  padding:12px;
}

h1 { color:#00ff88; font-size:20px; }

.controls {
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}

input, button {
  flex:1;
  padding:10px;
  background:#111c;
  color:white;
  border:1px solid #333;
  border-radius:6px;
}

button { cursor:pointer; }

label { font-size:12px; opacity:0.8; }

.box {
  margin-top:8px;
  padding:10px;
  border:1px solid #333;
  border-radius:6px;
  background:#000c;
  min-height:110px;
  font-size:13px;
  white-space:pre-wrap;
  overflow:auto;
}

.available span {
  display:inline-block;
  margin:4px;
  padding:6px 10px;
  border-radius:6px;
  background:#00ff8840;
  border:1px solid #00ff88;
}

.free { color:#00ff88; }
.taken { color:#ff5555; }

.stats { font-size:12px; opacity:.8; margin-top:4px; }
</style>
</head>

<body>
<canvas id="matrix"></canvas>

<div class="ui">
  <h1>Roblox Username Scanner</h1>

  <div class="controls">
    <input id="minLen" type="number" value="5" min="3" max="20" placeholder="Min Length">
    <input id="maxLen" type="number" value="7" min="3" max="20" placeholder="Max Length">
    <button onclick="start()">Start</button>
    <button onclick="stop()">Stop</button>
  </div>

  <label>Scan Speed (ms)</label>
  <input id="speed" type="range" min="500" max="2000" value="900">

  <div class="stats" id="stats">Checked: 0 | Available: 0</div>

  <div id="log" class="box"></div>

  <h3>Available (Tap to Copy)</h3>
  <div id="available" class="box available"></div>
</div>

<script>
/* ===== MATRIX BACKGROUND ===== */
const c = matrix, x = c.getContext("2d");
function resize(){ c.width=innerWidth; c.height=innerHeight }
resize(); addEventListener("resize", resize);

const letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
const fontSize=14;
let cols=Math.floor(c.width/fontSize);
let drops=Array(cols).fill(1);

setInterval(()=>{
  x.fillStyle="rgba(0,0,0,0.05)";
  x.fillRect(0,0,c.width,c.height);
  x.fillStyle="#00ff88";
  x.font=fontSize+"px monospace";
  drops.forEach((y,i)=>{
    x.fillText(letters[Math.floor(Math.random()*letters.length)], i*fontSize, y*fontSize);
    drops[i] = y*fontSize > c.height && Math.random()>.975 ? 0 : y+1;
  });
},50);

/* ===== SCANNER ===== */
const ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
let scanning=false, checked=0, found=0;

function rand(len){
  let n="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*26)];
  for(let i=1;i<len;i++) n+=ALPHA[Math.floor(Math.random()*ALPHA.length)];
  return n;
}

async function check(name){
  const r = await fetch("/api/check", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ username:name })
  });
  return r.json();
}

async function start(){
  if(scanning) return;
  scanning=true;

  const min = Number(document.getElementById("minLen").value);
  const max = Number(document.getElementById("maxLen").value);
  const speed = Number(document.getElementById("speed").value);
  const log = document.getElementById("log");
  const available = document.getElementById("available");
  const stats = document.getElementById("stats");

  while(scanning){
    const len = Math.floor(Math.random()*(max-min+1))+min;
    const name = rand(len);

    try {
      const d = await check(name);
      checked++;

      if(d.isValid && d.isTaken===false){
        found++;
        log.innerHTML += `<span class="free">AVAILABLE</span> → ${name}\n`;

        const s = document.createElement("span");
        s.textContent = name;
        s.onclick = () => navigator.clipboard.writeText(name);
        available.appendChild(s);
      } else {
        log.innerHTML += `<span class="taken">TAKEN</span> → ${name}\n`;
      }

      stats.textContent = `Checked: ${checked} | Available: ${found}`;
      log.scrollTop = log.scrollHeight;
    } catch(e){
      log.innerHTML += "Error checking username\n";
    }

    await new Promise(r => setTimeout(r, speed));
  }
}

function stop(){ scanning=false; }
</script>
</body>
</html>
