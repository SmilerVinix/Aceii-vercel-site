async function createLink() {
  const name = document.getElementById("name").value.trim();
  const original = document.getElementById("original").value.trim();
  let ending = document.getElementById("ending").value.trim();
  const result = document.getElementById("result");

  if (!name || !original || !ending) {
    result.textContent = "Please fill all fields";
    return;
  }

  try {
    const r = await fetch("/api/create", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ name, original, ending })
    });
    const data = await r.json();

    if (data.shortLink) {
      result.innerHTML = `✅ Short link created: <a href="${data.shortLink}" target="_blank">${data.shortLink}</a>`;
    } else if (data.error) {
      result.textContent = `❌ ${data.error}`; // Will show "already taken"
    } else {
      result.textContent = "Error creating link";
    }
  } catch (e) {
    result.textContent = "Request failed";
  }
}
