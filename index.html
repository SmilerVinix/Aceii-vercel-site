<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roblox Username Scanner</title>

<style>
body {
  background:#0b0b0b;
  color:white;
  font-family:system-ui;
  display:flex;
  justify-content:center;
  min-height:100vh;
}
.box {
  width:100%;
  max-width:420px;
  padding:20px;
}
h1 { color:#00ff88; text-align:center; }

select, button {
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:8px;
  border:none;
}
button {
  background:#00ff88;
  font-weight:bold;
}

.log {
  margin-top:15px;
  background:#111;
  padding:10px;
  border-radius:8px;
  max-height:280px;
  overflow:auto;
  font-size:14px;
}
.ok { color:#00ff88; }
.bad { color:#ff5555; }
</style>
</head>
<body>

<div class="box">
  <h1>Username Scanner</h1>

  <label>Username length</label>
  <select id="length">
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5" selected>5</option>
    <option value="6">6</option>
    <option value="8">8</option>
    <option value="10">10</option>
    <option value="20">20</option>
  </select>

  <label>Scan speed</label>
  <select id="speed">
    <option value="1">1/sec</option>
    <option value="2">2/sec</option>
    <option value="3" selected>3/sec</option>
  </select>

  <button onclick="start()">▶ Start</button>
  <button onclick="stop()">⛔ Stop</button>

  <div class="log" id="log"></div>
</div>

<script>
let running=false, timer=null;
const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

function gen(len){
  let s="";
  for(let i=0;i<len;i++){
    s+=chars[Math.floor(Math.random()*chars.length)];
  }
  return s;
}

async function scan(){
  if(!running) return;

  const len=Number(document.getElementById("length").value);
  const name=gen(len);
  const log=document.getElementById("log");

  const r=await fetch(`/api/validate?username=${name}`);
  const d=await r.json();

  if(d.available){
    log.innerHTML=`<div class="ok">✅ AVAILABLE: ${name}</div>`+log.innerHTML;
  }else{
    log.innerHTML=`<div class="bad">❌ ${name} (${d.reason})</div>`+log.innerHTML;
  }
}

function start(){
  if(running) return;
  running=true;
  const sp=Number(document.getElementById("speed").value);
  timer=setInterval(scan,1000/sp);
}

function stop(){
  running=false;
  clearInterval(timer);
}
</script>

</body>
</html>
