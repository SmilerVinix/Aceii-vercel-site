<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RBX Username Scanner</title>

<style>
* { box-sizing:border-box; }

body {
  margin:0;
  background:#0a0a0a;
  color:#fff;
  font-family:Inter, system-ui, sans-serif;
  display:flex;
  justify-content:center;
  min-height:100vh;
  padding:20px;
}

.app {
  width:100%;
  max-width:420px;
  background:#0f0f0f;
  border-radius:14px;
  padding:20px;
}

h1 {
  text-align:center;
  color:#00ff88;
  margin:0 0 15px;
}

.row {
  margin-top:12px;
}

select, button {
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  font-size:15px;
}

select {
  background:#151515;
  color:#fff;
}

button {
  background:#00ff88;
  font-weight:700;
  cursor:pointer;
}

button.stop {
  background:#ff4444;
  margin-top:8px;
}

button:disabled {
  opacity:.5;
}

.status {
  margin-top:10px;
  text-align:center;
  font-weight:600;
}

.log {
  margin-top:15px;
  background:#111;
  border-radius:10px;
  padding:10px;
  max-height:320px;
  overflow:auto;
  font-size:14px;
}

.ok { color:#00ff88; }
.bad { color:#ff5555; }
</style>
</head>

<body>
<div class="app">
  <h1>RBX Name Scanner</h1>

  <div class="row">
    <select id="length">
      <option>3</option>
      <option>4</option>
      <option selected>5</option>
      <option>6</option>
      <option>8</option>
      <option>10</option>
      <option>20</option>
    </select>
  </div>

  <div class="row">
    <select id="speed">
      <option value="1">1 / sec</option>
      <option value="2">2 / sec</option>
      <option value="3" selected>3 / sec</option>
    </select>
  </div>

  <button id="start">▶ Start</button>
  <button id="stop" class="stop" disabled>⛔ Stop</button>

  <div class="status" id="status">STOPPED</div>
  <div class="log" id="log"></div>
</div>

<script>
let running=false, timer;
const chars="abcdefghijklmnopqrstuvwxyz0123456789";
const log=document.getElementById("log");
const status=document.getElementById("status");

function gen(len){
  let s="";
  for(let i=0;i<len;i++){
    s+=chars[Math.floor(Math.random()*chars.length)];
  }
  return s;
}

function add(html){
  log.insertAdjacentHTML("afterbegin",html);
  while(log.children.length>120) log.removeChild(log.lastChild);
}

async function scan(){
  if(!running) return;

  const len=+length.value;
  const name=gen(len);

  try{
    const r=await fetch(`/api/validate?username=${name}`);
    const d=await r.json();

    if(d.available){
      add(`<div class="ok">✔ ${name} AVAILABLE</div>`);
    }else{
      add(`<div class="bad">✖ ${name}</div>`);
    }
  }catch{
    add(`<div class="bad">⚠ error</div>`);
  }
}

start.onclick=()=>{
  if(running) return;
  running=true;
  start.disabled=true;
  stop.disabled=false;
  status.textContent="RUNNING";
  timer=setInterval(scan,1000/+speed.value);
};

stop.onclick=()=>{
  running=false;
  clearInterval(timer);
  start.disabled=false;
  stop.disabled=true;
  status.textContent="STOPPED";
};
</script>
</body>
</html>
